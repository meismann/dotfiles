#!/bin/bash
old_string=$1
case $# in
  1 )
    ag "$old_string"
  ;;
  2 )
    if [ -d "$2" ]
    then
      echo "Searching for '$old_string' in $2"
      ag -Q "$old_string" "$2"
    else
      echo "Replacing '$old_string' with '$2' everywhere"
      ag -lQ "$old_string" | xargs sed -i '' "s/$old_string/$2/g"
    fi
  ;;
  3 )
    echo "Replacing '$old_string' with '$3' in $2"
    ag -lQ "$old_string" "$2" | xargs sed -i '' "s/$old_string/$3/g"
  ;;
  *)
    echo "Eingabe so:"
    echo "sr search_string"
    echo "sr search_string [search_dir|replace_string]"
    echo "sr search_string search_dir replace_string"
  ;;
esac

